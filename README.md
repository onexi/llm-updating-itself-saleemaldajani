[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg)](https://classroom.github.com/a/gQNXeTiZ)
# FunctionAgents
Call Function from LLM

---

## L03 - Dynamic GPT Tool Integration Server

This project implements an Express server that dynamically extends its own functionality by adding new tools generated by GPT. The code lives in the **L03** directory, and it leverages a subfolder called **functions** (located inside L03) to store these dynamically created tool modules.

### Overview

The server:
- **Receives GPT-generated tool code** through HTTP endpoints.
- **Cleans and processes** the GPT output to extract valid JavaScript tool definitions.
- **Saves the tool code** into a file under the `functions` directory.
- **Dynamically imports and loads** the new tool, making it available for execution.
- **Exposes multiple endpoints** to interact with the tools:
  - **`/api/add-tool`**: Directly adds a tool from provided GPT code.
  - **`/api/execute-function`**: Executes a specific tool function with supplied parameters.
  - **`/api/openai-call`**: Interacts with the OpenAI API using available tools. If no function call is detected, it checks if the GPT output contains a tool schema, then processes and saves it.
  - **`/api/prompt`**: Updates the prompt state.

### Directory Structure

```
L03/
├── functions/             # Folder where all dynamically generated tool files are stored
├── public/                # Static files served by the Express server (e.g., index.html)
└── server_tool.js              # Main Express server code (the code provided)
```

*Note: The server code assumes you are already inside the L03 directory. It writes tool files directly to the `functions` folder rather than creating a nested `L03/functions` directory.*

### How It Works

1. **Receiving and Processing Tool Code**  
   The `/api/add-tool` endpoint accepts GPT-generated tool code. The process:
   - Removes markdown formatting (e.g., triple backticks and language tags).
   - Extracts the tool’s name from the code (using a regex on the `details` object).
   - Saves the cleaned code as a file (for example, `subtractNumbers.js`) in the `functions` folder.
   - Dynamically imports the new module to verify that it exports an `execute` function and a `details` object.

2. **Executing Tools**  
   The `/api/execute-function` endpoint dynamically loads all tool modules from the `functions` folder, then executes the specified tool with the provided parameters.

3. **Interacting with the OpenAI API**  
   The `/api/openai-call` endpoint sends a prompt to the OpenAI API along with any available tool definitions. If no function call is detected in the response, it inspects the output for a valid tool schema. If found, it processes, saves, and loads the new tool automatically.

4. **Prompt State Management**  
   The `/api/prompt` endpoint updates the server’s internal state with the latest prompt information.

### Video Demonstration

The homework code works! I took a video demonstrating the working code:  
[Watch the demo on YouTube](https://www.youtube.com/watch?v=tL7Tge5QIt0)

### Running the Server

1. **Install Dependencies**  
   Run:
   ```bash
   npm install
   ```
   
2. **Change directory**
   ```bash
   cd L03
   ```
   
4. **Configure Environment Variables**  
   Create a `.env` file in the root of L03 with your OpenAI API key:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   ```

5. **Start the Server**  
   Run:
   ```bash
   node server_tool.js
   ```
   The server listens on port 3000 by default.

### Summary

This server code enables GPT to autonomously extend its capabilities by generating new JavaScript tools. Tools are saved in the `functions` directory (inside L03), loaded dynamically, and executed via designated API endpoints. The video demonstration linked above shows the code in action.
